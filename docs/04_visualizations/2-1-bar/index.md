---
title: 柱状图
sidebar_position: 2.1
---

柱状图（也称为条形图）是一种常见的数据可视化图表类型，通常用于展示数据的分布、比较不同类别之间的数量或频率，并突出显示各类别之间的差异。
柱状图通常由一系列垂直排列的矩形（柱子）组成，每个矩形的高度代表数据的数值大小。
在水平方向上，也可以使用条形图，其中矩形的宽度代表数据的大小。

柱状图通常包含以下要素：

- 横轴（X 轴）：横轴表示不同的类别或者变量。例如，如果柱状图用于展示销售数据，则横轴可以表示不同的产品或时间段。
- 纵轴（Y 轴）：纵轴表示数据的数值大小。根据数据的具体情况，纵轴可以表示数量、频率、百分比等。
- 柱子：柱子是柱状图的主要组成部分，用于表示每个类别或变量的数据量或者数值大小。柱子的高度或宽度与对应数据的大小成正比。
- 数据标签：通常在每个柱子的顶部显示具体的数值，以便观察者更清晰地理解数据。

柱状图的优点包括易于理解、直观、清晰明了，适用于展示不同类别之间的数量关系或趋势。
它可以帮助观察者快速比较各个类别之间的数据差异，以及识别出现有的模式或异常。

## 使用方式

首先，编写合适的 SQL 查询出数据，数据要求有：

1. X 轴数据不能重复
2. 系列字段需要为数值类型

```sql
# 创建 DataFrame
data = query('select * from yearly.a0806')

# 转换为 DataFrame
df = DataFrame(data)

df = df.pivot(index="day", columns="name", values="value")

# 查看数据
return df.sort_values('day') 
```

## 显示设置

对于柱状图、散点图和横向柱状图，您可以轻松地添加多个系列，并针对每个系列或统一格式进行详细设置，确保图表清晰、易于解读并符合需求。

### 单个系列设置

1. **格式化**：
   - **字段标题**：设置系列字段的标题，确保数据展示的准确性和清晰度。
   - **数值处理**：灵活处理数值的显示方式，如小数位数、千分位分隔符等，确保数据易于理解。

2. **样式**：
   - **Y轴方向设置**：可以选择将系列显示在左侧或右侧的 Y 轴，便于与其他系列区分或进行对比分析。
   - **显示类型**：定义图表显示的方式，如堆叠柱状图、普通柱状图或散点图等，选择最合适的展示形式。
   - **图例启用**：开启或关闭图例，根据需求决定是否需要在图表上显示图例，以帮助用户识别不同的系列。
   - **数值显示**：为每个数据点显示具体数值，提供更详细的信息，帮助用户更直观地理解数据。
   - **可视化映射**：通过颜色、大小或形状等方式映射不同的数据值，增强图表的视觉效果和数据表达能力。
   - **标线**：在图表中加入特定的标线，突出重要数据或区间，便于分析和比较。

3. **区域标记**：
   - 为特定数据区域添加不同颜色或标记，通过视觉效果突出数据趋势或关键区间，帮助用户快速识别关键区域。

### 统一格式设置

1. **轴线设置**：
   - **类目轴**：调整类目轴的显示方式和间隔，适应不同数据的展示需求。
   - **左侧/顶部 Y 轴**：设置左侧和顶部 Y 轴的刻度、标签格式、对齐方式等，确保轴线显示的整洁与一致性。
   - **右侧/底部 Y 轴**：对于多个系列的图表，可以启用右侧或底部 Y 轴，为不同系列提供独立的轴刻度和范围。

2. **显示设置**：
   - **堆叠模式**：对柱状图进行堆叠设置，展示不同系列数据的叠加效果，适用于需要展示总量和各个组成部分的场景。
   - **图例设置**：根据需求设置图例的样式、位置和可见性，确保图例在图表中清晰显示，帮助用户区分不同系列。
   - **数据缩放**：为用户提供数据缩放功能，方便用户根据需要查看详细数据，尤其是在数据量较大或波动较大的情况下，缩放功能能够增强用户体验。

### 综合设置

通过对单个系列和统一格式的设置，您可以针对每个数据系列以及整个图表进行精细化调整，从而提升图表的视觉效果、交互性和数据表达能力。无论是用于详细的市场分析，还是用于简洁明了的趋势展示，都能满足您的需求。

![image](./bar.png)


